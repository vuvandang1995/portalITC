{% extends 'client/base.html' %}
{% load staticfiles %}
{% load humanize %}
{% block title %}Cài đặt{% endblock %}
{% block css %} {% endblock %}
{% block content %}

<div id="container-itself" style="min-height:940px;">
    <div id="content-itself">
        {% if not user.is_block %}
        <div class="container-fluid">
            <div class="ng-scope">
                <div class="row bigger-margin deploy" id="deploy">
                    <div class="col-sm-9">
                        <div class="row bigger-margin">
                            <div class="col-sm-12">
                                <h3 class="label-header"><span class="circle-number">1</span> VM Hostname <span style="font-size: 18px;">(eg. host.domain.tld)</span></h3>
                                <form class="ng-pristine ng-valid" id="server-hostname" name="server-hostname">
                                    <input class="ng-pristine ng-untouched ng-valid ng-empty" name="svname" type="text">
                                </form>
                            </div>
                        </div>
                        <h3><span class="circle-number">2</span> Datacenter</h3>
                        <div class="row">
                            <div class="col-sm-3 col-xs-6">
                                <div class="one-location text-center selected" data-location="Hà Nội">
                                    <span>Hà Nội</span>
                                </div>
                            </div>
                            <!--<div class="col-sm-3 col-xs-6">-->
                                <!--<div class="one-location text-center" data-location="Hồ Chí Minh">-->
                                    <!--<span>Hồ Chí Minh</span>-->
                                <!--</div>-->
                            <!--</div>-->
                        </div>
                        <div class="clearfix"></div>
                        <h3><span class="circle-number">3</span> Gói Dịch Vụ</h3>
                        <div style="width: 100%">
                            <table style="width: 100%">
                                <tbody>
                                    <tr>
                                        <td>
                                            <!--<div class="tabbable-panel">-->
                                                <!--<div class="tabbable-line">-->
                                                    <!--<ul class="nav nav-tabs plan-tabs">-->
                                                        <!--<li class="active" id="simple-plan">-->
                                                            <!--<a>Simple Plans</a>-->
                                                        <!--</li>-->
                                                        <!--<li id="high-plan">-->
                                                            <!--<a>High Plans</a>-->
                                                        <!--</li>-->
                                                        <!--<li id="gpu-plan">-->
                                                            <!--<a>GPU Plans</a>-->
                                                        <!--</li>-->
                                                    <!--</ul>-->
                                                <!--</div>-->
                                            <!--</div>-->
                                            <div class="slides-container col-xs-12">
                                                <div>
                                                    <div class="slidelabel">
                                                        CPUs
                                                    </div>
                                                    <div class="fw">
                                                        <div class="dot-slider">
                                                            <input id="cpu-slider" type="text" name="" value="" tabindex="-1" readonly="">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div style="clear: both"></div>
                                                <div>
                                                    <div class="slidelabel">
                                                        RAM
                                                    </div>
                                                    <div class="fw">
                                                        <div class="dot-slider">
                                                            <input id="ram-slider" type="text" name="" value="" tabindex="-1" readonly="">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div style="clear: both"></div>
                                                <div>
                                                    <div class="slidelabel">
                                                        SSD
                                                    </div>
                                                    <div class="fw">
                                                        <div class="dot-slider">
                                                            <input id="ssd-slider" type="text" name="" value="" tabindex="-1" readonly="">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div style="clear: both"></div>
                                                <div class="hide">
                                                    <div class="slidelabel">
                                                        GPU
                                                    </div>
                                                    <div class="fw">
                                                        <div class="dot-slider">
                                                            <input id="cpu-slider" type="text" name="" value="" tabindex="-1" readonly="">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div style="clear: both"></div>
                        <!--<h3><span class="circle-number">4</span> DATADISK</h3><span id="add-extract-disk"><strong>Thêm</strong></span>-->
                         <!--<table class="table table-striped table-condensed table-bordered vmiddle" style="margin-bottom: 0px;">-->
                            <!--<thead>-->
                                <!--<tr>-->
                                    <!--<th style="width:200px">Disk name</th>-->
                                    <!--<th>Kích thước (GB)</th>-->
                                    <!--<th style="width:200px">Giá/tháng VNĐ</th>-->
                                    <!--<th style="width:70px">Xóa</th>-->
                                <!--</tr>-->
                            <!--</thead>-->
                            <!--<tbody class="row-click">-->
                            <!---->
                            <!--</tbody>-->
                        <!--</table>-->
                        <!--<div style="clear:both"></div>-->
                        <h3><span class="circle-number">4</span> Hệ điều hành (64-bit)</h3>
                        <div class="tab-content" id="oses">
                            <ul class="tabs">
                                <li class="active" data-toggle="tab" href="#os-hdh">
                                    <a>Hệ điều hành</a>
                                </li>
                                <!--<li data-toggle="tab" href="#backups">-->
                                    <!--<a>Backups của tôi</a>-->
                                <!--</li>-->
                                <li data-toggle="tab" href="#snapshots">
                                    <a>Snapshots của tôi</a>
                                </li>
                                <!--<li data-toggle="tab" href="#one-click-apps">-->
                                    <!--<a>One-Click Apps</a>-->
                                <!--</li>-->
                            </ul>
                            <div class="content fade in active" id="os-hdh">
                                <div class="row very-big-margin">
                                    <div class="row">
                                        <div class="col-sm-12 os-padding">
                                            <div class="row gutter-100">
                                                <div class="col-sm-2 col-sm-15">
                                                    <div class="one-distribution">
                                                        <div class="distribution-logo centos"></div>
                                                        <div class="relative">
                                                            <a class="btn one-dis-toggle"><span class="selected-os-hdh" data-default-os="Centos">CentOS</span> <i class="glyphicon glyphicon-triangle-bottom" style="font-size:9px"></i></a>
                                                            <div class="one-distributions-dropdown green-dropdown">
                                                                <div>
                                                                    {% for os in centos %}
                                                                    <p class="os-select" data-id="{{os.i_d}}">{{os.name}}</p>
                                                                    {% endfor %}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-2 col-sm-15">
                                                    <div class="one-distribution">
                                                        <div class="distribution-logo ubuntu"></div>
                                                        <div class="relative">
                                                            <a class="btn one-dis-toggle btn-default"><span class="selected-os-hdh">Ubuntu</span> <i class="glyphicon glyphicon-triangle-bottom" style="font-size:9px"></i></a>
                                                            <div class="one-distributions-dropdown green-dropdown">
                                                                <div>
                                                                    {% for os in ubuntu %}
                                                                    <p class="os-select" data-id="{{os.i_d}}">{{os.name}}</p>
                                                                    {% endfor %}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-2 col-sm-15">
                                                    <div class="one-distribution">
                                                        <div class="distribution-logo debian"></div>
                                                        <div class="relative">
                                                            <a class="btn one-dis-toggle btn-default"><span class="selected-os-hdh" data-default-os="Debian">Debian</span> <i class="glyphicon glyphicon-triangle-bottom" style="font-size:9px"></i></a>
                                                            <div class="one-distributions-dropdown green-dropdown" style="display: none;">
                                                                <div>
                                                                    {% for os in debian %}
                                                                    <p class="os-select" data-id="{{os.i_d}}">{{os.name}}</p>
                                                                    {% endfor %}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-2 col-sm-15">
                                                    <div class="one-distribution">
                                                        <div class="distribution-logo fedora"></div>
                                                        <div class="relative">
                                                            <a class="btn one-dis-toggle btn-default"><span class="selected-os-hdh" data-default-os="Fedora">Fedora</span> <i class="glyphicon glyphicon-triangle-bottom" style="font-size:9px"></i></a>
                                                            <div class="one-distributions-dropdown green-dropdown" style="display: none;">
                                                                <div>
                                                                    {% for os in fedora %}
                                                                    <p class="os-select" data-id="{{os.i_d}}">{{os.name}}</p>
                                                                    {% endfor %}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-sm-2 col-sm-15">
                                                    <div class="one-distribution">
                                                        <div class="distribution-logo windows"></div>
                                                        <div class="relative">
                                                            <a class="btn one-dis-toggle btn-default"><span class="selected-os-hdh" data-default-os="Windows">Windows</span> <i class="glyphicon glyphicon-triangle-bottom" style="font-size:9px"></i></a>
                                                            <div class="one-distributions-dropdown green-dropdown" style="display: none;">
                                                                <div>
                                                                    {% for os in windows %}
                                                                    <p class="os-select" data-id="{{os.i_d}}" >{{os.name}}</p>
                                                                    {% endfor %}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="content ng-hide">
                                <div class="row very-big-margin">
                                    <div class="row">
                                        <div class="col-sm-12 padding10">
                                            <div class="col-sm-2 col-sm-15 padding10">
                                                <div class="one-distribution">
                                                    <div class="distribution-logo centos"></div>
                                                    <div class="relative">
                                                        <a class="btn one-dis-toggle btn-default"><span style="overflow: hidden; text-overflow: ellipsis; display: block; float: left; width: 90%;">Centos</span> <i class="glyphicon glyphicon-triangle-bottom" style="font-size:9px"></i></a>
                                                        <div class="one-distributions-dropdown green-dropdown">
                                                            <div>
                                                                <!-- ngRepeat: temp in temps -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div><!-- end ngRepeat: (key, temps) in gpu_templates -->
                                            <div class="col-sm-2 col-sm-15 padding10">
                                                <div class="one-distribution">
                                                    <div class="distribution-logo ubuntu"></div>
                                                    <div class="relative">
                                                        <a class="btn one-dis-toggle btn-default"><span class="ng-binding" style="overflow: hidden; text-overflow: ellipsis; display: block; float: left; width: 90%;">Ubuntu</span> <i class="glyphicon glyphicon-triangle-bottom" style="font-size:9px"></i></a>
                                                        <div class="one-distributions-dropdown green-dropdown">
                                                            <div>
                                                                <!-- ngRepeat: temp in temps -->
                                                                <p class="ng-binding ng-scope">Ubuntu 16.04</p><!-- end ngRepeat: temp in temps -->
                                                                <p class="ng-binding ng-scope">Ubuntu 16.04 (64-bit) GPU Nvidia Driver</p><!-- end ngRepeat: temp in temps -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div><!-- end ngRepeat: (key, temps) in gpu_templates -->
                                            <div class="col-sm-2 col-sm-15 padding10">
                                                <div class="one-distribution">
                                                    <div class="distribution-logo debian"></div>
                                                    <div class="relative">
                                                        <a class="btn one-dis-toggle btn-default"><span class="ng-binding" style="overflow: hidden; text-overflow: ellipsis; display: block; float: left; width: 90%;">Debian</span> <i class="glyphicon glyphicon-triangle-bottom" style="font-size:9px"></i></a>
                                                        <div class="one-distributions-dropdown green-dropdown">
                                                            <div>
                                                                <!-- ngRepeat: temp in temps -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div><!-- end ngRepeat: (key, temps) in gpu_templates -->
                                            <div class="col-sm-2 col-sm-15 padding10">
                                                <div class="one-distribution">
                                                    <div class="distribution-logo fedora"></div>
                                                    <div class="relative">
                                                        <a class="btn one-dis-toggle btn-default"><span class="ng-binding" style="overflow: hidden; text-overflow: ellipsis; display: block; float: left; width: 90%;">Fedora</span> <i class="glyphicon glyphicon-triangle-bottom" style="font-size:9px"></i></a>
                                                        <div class="one-distributions-dropdown green-dropdown">
                                                            <div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-2 col-sm-15 padding10">
                                                <div class="one-distribution">
                                                    <div class="distribution-logo windows"></div>
                                                    <div class="relative">
                                                        <a class="btn one-dis-toggle btn-default"><span class="ng-binding" style="overflow: hidden; text-overflow: ellipsis; display: block; float: left; width: 90%;">Windows</span> <i class="glyphicon glyphicon-triangle-bottom" style="font-size:9px"></i></a>
                                                        <div class="one-distributions-dropdown green-dropdown">
                                                            <div>
                                                                <!-- ngRepeat: temp in temps -->
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--<div class="content fade" id="backups" style="padding: 0px;">-->
                                <!--<div class="table-container">-->
                                    <!--<table class="table table-striped noborder">-->
                                        <!--<tbody>-->
                                            <!--<tr>-->
                                                <!--<td colspan="5" style="font-size: 18px;">Chưa có backup!</td>-->
                                            <!--</tr>-->
                                        <!--</tbody>-->
                                    <!--</table>-->
                                <!--</div>-->
                            <!--</div>-->
                            <div class="content fade" id="snapshots" style="padding: 0px;">
                                <div class="table-container tab-pane">
                                    <table class="table table-striped noborder">
                                        <tbody>
                                            <tr>
                                                {% if snapshot|length == 0 %}
                                                <td colspan="5" style="font-size: 18px;">Chưa có snapshot!</td>
                                                {% else %}
                                                <td>
                                                    <select class="styled-input pull-left" id="ls_snapshot" style="height: 50px">
                                                    {% for sn in snapshot %}
                                                        <option value="{{sn.i_d}}">{{sn.name}}</option>
                                                    {% endfor %}
                                                    </select>
                                                </td>
                                                {% endif %}
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <!--<div class="content fade" id="one-click-apps" style="padding: 0px;">-->
                                <!--<div class="row very-big-margin">-->
                                    <!--<div class="row">-->
                                        <!--<div class="col-sm-12" style="padding: 15px 10px">-->
                                            <!--&lt;!&ndash; ngRepeat: app in apps &ndash;&gt;-->
                                            <!--<div class="app col-sm-4 padding10 ng-scope">-->
                                                <!--<div class="inner">-->
                                                    <!--<div class="img"><img src="images/wordpress.png" style="width: 40px"></div>-->
                                                    <!--<div>-->
                                                        <!--<span class="name ng-binding">Wordpress</span> <span class="os ng-binding">on Centos 6.7 X64</span>-->
                                                    <!--</div>-->
                                                <!--</div>-->
                                            <!--</div>&lt;!&ndash; end ngRepeat: app in apps &ndash;&gt;-->
                                            <!--<div class="app col-sm-4 padding10 ng-scope">-->
                                                <!--<div class="inner">-->
                                                    <!--<div class="img"><img src="images/openvpn.png" style="width: 40px"></div>-->
                                                    <!--<div>-->
                                                        <!--<span class="name ng-binding">OpenVPN</span> <span class="os ng-binding">on Centos 6.7 X64</span>-->
                                                    <!--</div>-->
                                                <!--</div>-->
                                            <!--</div>&lt;!&ndash; end ngRepeat: app in apps &ndash;&gt;-->
                                        <!--</div>-->
                                    <!--</div>-->
                                <!--</div>-->
                            <!--</div>-->
                        </div>
                        <div class="row bigger-margin">
                            <div class="col-sm-6">
                                <h3 class="not-first"><span class="circle-number">5</span> Network</h3>
                                <div class="row gutter-0">
                                    <div class="col-xs-12 col-md-12">
                                        <label class="noselect bold network-label" style="border-right:2px solid #fff;"><input class="ng-pristine ng-untouched ng-valid ng-not-empty" name="network_type" type="radio" value="basic" checked> Basic Network</label><br>
                                        <div id="basic_network" class="equal-height">
                                            <div class="row">
                                                <div class="col-xs-12 col-md-6">
                                                    <div class="one-networks">
                                                        <label>Public IP <select class="styled-input pull-left" id="add-more-ip" style="height: 30px">
                                                            <option value="0">
                                                                1 IPv4 Address (Included)
                                                            </option>
                                                            <!--<option value="50000">-->
                                                                <!--2 x IPv4 Address (+50,000/mo)-->
                                                            <!--</option>-->
                                                        </select></label>
                                                    </div>
                                                </div>
                                                <div class="col-xs-12 col-md-6">
                                                    <div class="one-networks">
                                                        <label>Kích hoạt tính năng mạng private <input class="ng-pristine ng-untouched ng-valid ng-empty" name="private_network" type="checkbox"></label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--<div class="col-xs-12 col-md-6">-->
                                        <!--<label class="noselect bold network-label"><input class="ng-pristine ng-untouched ng-valid ng-not-empty" name="network_type" type="radio" value="advance"> Advance Network</label><br>-->
                                        <!--<div id="advance_network" class="equal-height">-->
                                            <!--<div style="line-height: 22px;">-->
                                                <!--Bạn chưa tạo VPC network nào thuộc Datacenter này.<a href="vpc"><b>Tạo </b></a> vpc network tại đây-->
                                            <!--</div>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                </div>
                            </div>
                            <!--<div class="col-sm-6">-->
                                <!--<h3 class="not-first"><span class="circle-number">7</span> Backups</h3>-->
                                <!--<div class="checkbox-wrapper">-->
                                    <!--<div>-->
                                        <!--<label class="noselect network-label"><input class="check-box-custom enable-backup-check" type="checkbox" value="18000"> Kích hoạt tính năng Auto backup (<span style="font-weight: bold;">18,000</span> VND)</label>-->
                                        <!--<ul class="liblue">-->
                                            <!--<li><span class="square-icon"></span> Phí dịch vụ: 30% giá của ổ cứng</li>-->
                                            <!--<li><span class="square-icon"></span> Theo mặc định, Auto backup chạy hàng ngày</li>-->
                                            <!--<li><span class="square-icon"></span> Thời gian backup có thể cấu hình được</li>-->
                                            <!--<li><span class="square-icon"></span> Chỉ có một bản backup gần nhất được giữ lại</li>-->
                                            <!--<li><span class="square-icon"></span> Bạn chỉ có thể khôi phục lại toàn bộ máy ảo, không phải từng tập tin riêng lẻ</li>-->
                                        <!--</ul>-->
                                    <!--</div>-->
                                <!--</div>-->
                            <!--</div>-->
                        </div>
                        <!--<h3><span class="circle-number">8</span> IBM Security</h3>-->
                        <!--<div class="checkbox-wrapper">-->
                            <!--<label class="noselect network-label"><input class="check-box-custom active-security-checkbox" type="checkbox" value="1000000"> Active IBM Security feature <span style="font-weight: bold;">(1,000,000 VND)</span></label>-->
                        <!--</div>-->
                        <h3 class="not-first"><span class="circle-number">6</span> Thêm SSH (không bắt buộc)</h3>
                        <div class="row">
                            <div class="col-md-4">
                                <select class="styled-input pull-left" id="add_ssh_key" style="height: 30px">
                                    <option value="0"> Không</option>
                                    {% for key in ls_key %}
                                    <option value="{{key.id}}">{{key.name}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-2">
                                <a class="btn btn-primary btn-small btn-not-that-small btn-add-ssh" data-toggle="modal" data-target="#sshkey">Tạo mới</a></p>
                            </div>
                        </div>

                        <div style="clear: both"></div>
                        <br><br>
                        <div class="delimeter-2" style="border-color:#cccccc;"></div>
                        <br>
                        <label><input class="a-bit-lower ng-pristine ng-untouched ng-valid ng-empty" style="vertical-align: middle; margin-top: -2px;" type="checkbox" name="dong_y"> <span>Tôi đồng ý với điều khoản dịch vụ và chính sách bảo mật</span></label>
                        <div>
                            <button class="btn btn-success btn-a-bit-bigger" id="create_vm" style="padding-left: 40px; padding-right: 40px;">Đồng ý tạo <i class="glyphicon glyphicon-play" style="font-size: 11px; margin-top: 0px; top: -1px;"></i></button>
                        </div>
                    </div>
                    <div class="order-summary hideonmobile" id="summary" style="position: fixed; top: 60px; right: 0px; height: 100vh; width: 300px; background: white; padding: 30px;">
                        <h4 class="text-center billing-heading">Thông tin hóa đơn</h4>
                        <div class="single">
                            <label>Hostname</label> <span id="label-hostname">Không</span>
                        </div>
                        <div class="single">
                            <label>Plan</label>
                            <span class="plan-cpu-label">1 CPUs x {{price.vcpus| intcomma }} VNĐ</span>
                            <span class="plan-ram-label">1 GB RAM x {{price.ram | intcomma }} VNĐ</span>
                            <span class="plan-ssd-label">1 GB SSD x {{price.disk_ssd | intcomma }} VNĐ</span>
                            <span class="plan-gpu-label">0 GPU x 5,000,000 VNĐ</span>
                        </div>
                        <div class="single">
                            <label>Datacenter</label> <span id="label-datacenter">Hà Nội</span>
                        </div>
                        <div class="single">
                            <label>Hệ điều hành</label> <span id="data-os">Centos 6.7</span>
                        </div>
                        <div class="single">
                            <label>Settings</label> <span class="check-settings">không</span>
                            <!-- get data from server then print , add class hide for default all -->
                            <div class="hide enable-add-more-ip">
                                <span style="display: inline;">Thêm 1 địa chỉ IP</span>
                                <span style="display: inline; font-weight: bold;">50,000</span> VND/mo
                            </div>
                            <div class="hide enable-backup-check-info">
                                Backups <span style="display: inline; font-weight: bold;">18,000</span> VND/mo
                            </div>
                            <span class="hide">Enable private network (free)</span>
                            <span class="hide active-security-checkbox-label">Enable IBM Security (<b>1,000,000</b>/mo)</span>
                            <!-- end -->
                        </div>
                        <div class="single">
                            <label>SSH Keys</label> <span>không</span>
                        </div>
                        <div class="single">
                            <label>Tổng số (Tính tới <span id="proratadate">2019-01-31</span>)</label>
                            <div>
                                <b><span class="total-price">1,180,000</span></b>
                            </div>
                        </div>
                        <div class="single" id="prorata_tax">
                            <label>VAT</label> <b><span class="price"></span></b>
                            <div >
                                <b><span class="vat-price">118,000</span></b>
                            </div>
                        </div>
                        <div class="single">
                            <label>Tổng thanh toán hôm nay</label>
                            <div class="total_price">
                                <b><span class="total-price-with-vat">1,298,000</span></b>
                            </div>
                        </div>
                        <div class="single">
                            <label>* Tổng thanh toán định kỳ</label>
                            <div>
                                <b><span class="price">Chỗ này chưa biết công thức tính sao !</span></b>
                            </div>
                            <i style="font-size: 10px; clear: both; font-weight: normal">Giá trên đã bao gồm 10% thuế VAT</i>
                        </div>
                    </div>
                </div>
            </div>
            <style>
            .app{
            cursor: pointer;
            margin-bottom: 20px;
            }
            .app .inner{
            padding: 10px;
            border: 1px solid #ccc;
            }
            .app .inner.active{
            border: 3px solid #51c688;
            padding: 8px;
            }
            .app .img{
            float: left;
            padding: 0 10px;
            }
            .app img{
            height: 40px;
            width: 80px;
            }
            .app .des{
            display: inline-block;
            }
            .app .name{
            font-weight: bold;
            font-size: 16px;
            display: block;
            }
            .app .os{
            font-size: 14px;
            display: block;
            }
            .app span {
            line-height: 23px;
            }
            </style>
        </div>
        {% else %}
        <h3 style="margin-top: 0px">Tài khoản của bạn đã hết thời gian dùng thử.</h3>
        <h3 style="margin-top: 0px">Hãy thanh toán hóa đơn để tiếp tục sử dụng dịch vụ.</h3>
        <h3 style="margin-top: 0px">Thân !</h3>
        {% endif %}
    </div>
</div>
<div class="clearfix"></div>

<div class="modal" id="sshkey">
    <div class="modal-dialog modal-sm">
        <div class="modal-content ">
                <div class="modal-header">
                    <h4 class="modal-title">Tạo mới key</h4>
                </div>
                <div class="modal-body form-group">
                    <input class="form-control" type="text" placeholder="key pair Name" name="sshkeyname" required>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary" value="OK" id="sshkey_submit" >Tạo</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal" id="close_modal_sshkey">Đóng</button>
                </div>
        </div>
    </div>
</div>
{% csrf_token %}
{% endblock %}
{% block js %}
<script src="{% static 'js/jquery.matchHeight-min.js' %}" type="text/javascript"></script>
    <!--Plugin CSS file with desired skin-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.0/css/ion.rangeSlider.min.css"/>
    <!--Plugin JavaScript file-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.0/js/ion.rangeSlider.min.js"></script>
    <script type="text/javascript">
        jQuery( document ).ready(function($) {
            $('#top-nav a').click(function (e) {
                e.preventDefault();
                $(this).tab('show');
                $('#top-nav a').removeClass('active');
                $(this).addClass('active');
                return false;
            });

            $('.plan-tabs li a').click(function (e) {
                e.preventDefault();
                $(this).closest('li').siblings().removeClass('active');
                $(this).closest('li').addClass('active');
            });

            $('.equal-height').matchHeight();

            function numberWithCommas(number) {
                var parts = number.toString().split(".");
                parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                return parts.join(".");
            }

            function Calculate() {
                var add_ip_price = $('#add-more-ip option:selected').val();
                
                var check_backup_price = $('input.enable-backup-check').prop('checked');
                var check_security_price = $('input.active-security-checkbox').prop('checked');
                if (check_backup_price == true) {
                    var backup_price = $('input.enable-backup-check').val();
                } else {
                    var backup_price = 0;
                };
                if (check_security_price == true) {
                    var security_price = $('input.active-security-checkbox').val();
                } else {
                    var security_price = 0;
                };

                var cpu_price = $('#cpu-slider').val();
                var ram_price = $('#ram-slider').val();
                var ssd_price = $('#ssd-slider').val();
                var total = parseInt(cpu_price) + parseInt(ram_price) + parseInt(ssd_price) + parseInt(backup_price) + parseInt(add_ip_price) + parseInt(security_price);
                var vat = total/10;
                var total_with_vat = total + vat;


                $('.total-price').text(numberWithCommas(total));
                $('.vat-price').text(numberWithCommas(vat));
                $('.total-price-with-vat').text(numberWithCommas(total_with_vat));

                $('.plan-cpu-label').text('CPU x ' + numberWithCommas(cpu_price) + 'VNĐ');
            };

            // click tab then rebuild slider
            // $('#high-plan').click(function(){
            //     $("#cpu-slider").closest('.dot-slider').find('.irs-with-grid').remove();
            //     // High Plan CPU
            //     var values = [1000000,2000000, 4000000, 6000000, 8000000, 10000000, 12000000, 14000000];
            //     var values_p = [1, 2, 4, 6, 8,10,12,14];
                
            //     var custom_values = [1, 2, 3];
                
            //     // be careful! FROM and TO should be index of values array
            //     var my_from = custom_values.indexOf(1);
            //     var my_to = custom_values.indexOf(3);

            //     function reinitial() {
            //         $("#cpu-slider").ionRangeSlider({
            //             type: "single",
            //             grid: true,
            //             from: my_from,
            //             values: values,
            //             postfix: " core",
            //             prettify: function (n) {
            //                 var ind = values.indexOf(n);
            //                 return values_p[ind];
            //             },
            //             onChange: function(data) {
            //                 Calculate();
            //             }
            //         });
            //     };

            //     // use setTimeout() to execute
            //     setTimeout(reinitial, 1000);

            // });

            $('.one-location').click(function(){
                $(this).closest('.row').find('.one-location').removeClass('selected');
                $(this).addClass('selected');
                var datacenter = $(this).data('location');
                $('#label-datacenter').text(datacenter);
            });
            $('form#server-hostname :input').change(function() {
                var hostname = $(this).val();
                $('#label-hostname').text(hostname);
            });
            $('.one-distribution .one-dis-toggle').click(function(){
                $(this).closest('.relative').find('.one-distributions-dropdown').show();
            });
            $('.os-select').click(function(){
                var default_os = $(this).closest('.relative').find('.selected-os-hdh').data('default-os');
                var os_selected = $(this).text();
                $('#data-os').text(os_selected);
                $(this).closest('.relative').find('.selected-os-hdh').text(os_selected);
                $(this).closest('.relative').find('.one-distributions-dropdown').hide();
                $(this).closest('.col-sm-15').siblings().find('.one-dis-toggle').addClass('btn-default');
                $(this).closest('.col-sm-15').find('.one-dis-toggle').removeClass('btn-default');
                $(this).closest('.col-sm-15').siblings().find('.selected-os-hdh').text(default_os);
            });

            var settings = $('.check-settings');
            $('.enable-backup-check').change(function() {
                if($(this).is(":checked")) {
                    var enable_backup_price = $(this).val();
                    $('.enable-backup-check-info').addClass('show');
                } else {
                    $('.enable-backup-check-info').removeClass('show');
                }
                settings.hide();
                Calculate();
            });
            $('.active-security-checkbox').change(function() {
                if($(this).is(":checked")) {
                    var active_security_price = $(this).val();
                    $('.active-security-checkbox-label').addClass('show');
                } else {
                    $('.active-security-checkbox-label').removeClass('show');
                }
                settings.hide();
                Calculate();
            });
            $('#add-more-ip').change(function(){
                var add_more_ip_val = $(this).find("option:selected").attr('value');
                if(add_more_ip_val > 0) {
                    $('.enable-add-more-ip').addClass('show');
                } else {
                    $('.enable-add-more-ip').removeClass('show');
                }
                settings.hide();
                Calculate();
            });


            // CPU
            var v = {{ price.vcpus }};
            var values = [v, 2*v, 4*v, 6*v, 8*v];
            var values_p = [1, 2, 4, 6, 8];
            
            var custom_values = [1, 2, 3];
            
            // be careful! FROM and TO should be index of values array
            var my_from = custom_values.indexOf(1);
            var my_to = custom_values.indexOf(3);
            $("#cpu-slider").ionRangeSlider({
                type: "single",
                grid: true,
                from: my_from,
                values: values,
                postfix: " core",
                prettify: function (n) {
                    var ind = values.indexOf(n);
                    return values_p[ind];
                },
                onChange: function(data) {
                    Calculate();
                }
            });


            // RAM
            var v = {{ price.ram }};
            var values = [v,2*v, 3*v];
            var values_p = [1, 2, 3];
            
            $("#ram-slider").ionRangeSlider({
                type: "single",
                grid: true,
                values: values,
                postfix: " GB",
                prettify: function (n) {
                    var ind = values.indexOf(n);
                    return values_p[ind];
                },
                onChange: function(data) {
                    Calculate();
                }
            });


            // SSD
            var v = {{ price.disk_ssd }};
            var values = [10*v, 20*v, 30*v];
            var values_p = [10, 20, 30];
            
            $("#ssd-slider").ionRangeSlider({
                type: "single",
                grid: true,
                values: values,
                postfix: " GB",
                prettify: function (n) {
                    var ind = values.indexOf(n);
                    return values_p[ind];
                },
                onChange: function(data) {
                    Calculate();
                }
            });

            var count = 0;
            $('#add-extract-disk').click(function(){
                count += 1;
                var new_slider = ".extract-ssd-slider-" + count;
                var append_me = "<tr class='template_data_disk'>"
                                + "<td><input class='input-small data_disk_name text-center' type='text' value='DATA DISK'></td>"
                                + "<td><div class='noselect dot-slider'>"
                                + "<input class='extract-ssd-slider-" +  count + "' type='text' name='' value='' tabindex='-1' readonly=''>"
                                + "</div></td>"
                                + "<td align='center'><span class='data_disk_price'>330,000</span></td>"
                                + "<td align='center'>"
                                + "<a class='btn btn-mini btndelete'><span class='glyphicon glyphicon-remove'></span></a>"
                                + "</td>";
                                + "</tr>";

                $('tbody.row-click').append(append_me);

                function numberWithCommas(number) {
                    var parts = number.toString().split(".");
                    parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                    return parts.join(".");
                }

                function Calculate() {
                    var add_ip_price = $('#add-more-ip option:selected').val();
                    
                    var check_backup_price = $('input.enable-backup-check').prop('checked');
                    var check_security_price = $('input.active-security-checkbox').prop('checked');
                    if (check_backup_price == true) {
                        var backup_price = $('input.enable-backup-check').val();
                    } else {
                        var backup_price = 0;
                    };
                    if (check_security_price == true) {
                        var security_price = $('input.active-security-checkbox').val();
                    } else {
                        var security_price = 0;
                    };

                    var cpu_price = $('#cpu-slider').val();
                    var ram_price = $('#ram-slider').val();
                    var ssd_price = $('#ssd-slider').val();

                    var each_price = 0;
                    var total_each_price = 0;
                    $('tr.template_data_disk').each(function(){
                        each_price = parseInt($(this).find(".dot-slider input").val());
                        total_each_price += each_price;
                    });

                    var extract_ssd_price = total_each_price;
                    var total = parseInt(cpu_price) + parseInt(ram_price) + parseInt(ssd_price) + parseInt(extract_ssd_price) + parseInt(backup_price) + parseInt(add_ip_price) + parseInt(security_price);
                    var vat = total/10;
                    var total_with_vat = total + vat;

                    $('.total-price').text(numberWithCommas(total));
                    $('.vat-price').text(numberWithCommas(vat));
                    $('.total-price-with-vat').text(numberWithCommas(total_with_vat));

                    $('.plan-cpu-label').text('CPU x ' + numberWithCommas(cpu_price) + 'VNĐ');
                }

                var values = [400,600, 800];
                var values_p = [10, 20, 30];

                // extract ssd
                $(new_slider).ionRangeSlider({
                    type: "single",
                    grid: true,
                    values: values,
                    postfix: " GB",
                    prettify: function (n) {
                        var ind = values.indexOf(n);
                        return values_p[ind];
                    },
                    onChange: function(data) {
                        Calculate();
                    }
                });

                Calculate();
            });
            $(document).on('click','.template_data_disk .btndelete',function(){
                $(this).closest('.template_data_disk').remove();
                Calculate();
            });
        });

            jQuery(window).scroll(function() {
                var scrollTop = $(window).scrollTop();
                if ( scrollTop > 0 ) {
                    $('#summary').css('top',0);
                } else  {
                    $('#summary').css('top',60);
                }
            });
    </script> 
    <script>
        $(document).ready(function () {
            $('#left-menu').find('li').removeClass('selected')
            $('.setup').addClass('selected')
        })
        var user_money = {{user.money}};
        var user_trial = "{{user.is_trial}}";
        var user_server = {{user_server}};
    </script>

    <script src="{% static 'js/client/setup.js' %}"></script>
{% endblock %}